language: node_js
node_js:
- '7'
cache:
  bundler: true
  directories:
  - node_modules
before_install:
- openssl aes-256-cbc -K $encrypted_91f382c52391_key -iv $encrypted_91f382c52391_iv
  -in id_rsa.enc -out ~/.ssh/id_rsa -d
- chmod 600 ~/.ssh/id_rsa
install:
- npm install
script:
- npm run build
after_script:
- scp -P $PORT -r build $SERVER_NAME:www/koa-blog
addons:
  ssh_known_hosts:
    secure: YGLX7EDSqfYrHnYHmwuuh3zXFVbmW5QZBfC8tNGhvjVtubrg29D4new0T4AR0O2Qm7MGfkXJvYoxJVDIzzJiy4yMSJlp7ek3GaXW6NxusZooeqzQrJYir+j8ns3bbHr+nXjloIuSDMQzi9tMVq4Yr0uNNXo75mil7XEqnBUFNg9WnzLxe94RX7K2Lj94ken1sYLOwlY85ICGsHnTJjRYbD6LizRyGJ2htaqnEW+vOQ8l10mtICOlBwGav5aNgsXuSP74qdhBDYEAPHko1OhRvgqXiYP8ziV4If9/KZw8LCR3k8+j7rHp2t6H9wRut2aYl9izCLNhy4+b0q7H8gjiMDrOxJMVWZV9HVZ/mRLiwHruLOfHWVdFPVGPzLGZzsFxsLEChiwTRnA8c1t5TQWQwaLGjRYI6AjqEvRoOZdJzvNKySm7kGlyy+alFozYW+N7P4+zl4SujvAP5CMCvoELL3+BkY7GlgSBkiTGo5Ss/bplPrznWwTzFclfxsiE/TGvHBMdEQ/zm/QMXHAFxiKEVJwx4gKh70zCGalSQg2IPPlDvA5z1eZKq0uhDFdWQSRD9+co6mRIVERYoLGRBHUUge3Xi9TxOilqP2Tx+a7PDnAbGNPccDspdXTQjdUu9MHZoOZjxH/eZhNhviKT0iel+djFnBoTd1Qth9N1UqFCD6U=
branches:
  only:
  - master
env:
  global:
    secure: YGLX7EDSqfYrHnYHmwuuh3zXFVbmW5QZBfC8tNGhvjVtubrg29D4new0T4AR0O2Qm7MGfkXJvYoxJVDIzzJiy4yMSJlp7ek3GaXW6NxusZooeqzQrJYir+j8ns3bbHr+nXjloIuSDMQzi9tMVq4Yr0uNNXo75mil7XEqnBUFNg9WnzLxe94RX7K2Lj94ken1sYLOwlY85ICGsHnTJjRYbD6LizRyGJ2htaqnEW+vOQ8l10mtICOlBwGav5aNgsXuSP74qdhBDYEAPHko1OhRvgqXiYP8ziV4If9/KZw8LCR3k8+j7rHp2t6H9wRut2aYl9izCLNhy4+b0q7H8gjiMDrOxJMVWZV9HVZ/mRLiwHruLOfHWVdFPVGPzLGZzsFxsLEChiwTRnA8c1t5TQWQwaLGjRYI6AjqEvRoOZdJzvNKySm7kGlyy+alFozYW+N7P4+zl4SujvAP5CMCvoELL3+BkY7GlgSBkiTGo5Ss/bplPrznWwTzFclfxsiE/TGvHBMdEQ/zm/QMXHAFxiKEVJwx4gKh70zCGalSQg2IPPlDvA5z1eZKq0uhDFdWQSRD9+co6mRIVERYoLGRBHUUge3Xi9TxOilqP2Tx+a7PDnAbGNPccDspdXTQjdUu9MHZoOZjxH/eZhNhviKT0iel+djFnBoTd1Qth9N1UqFCD6U=
